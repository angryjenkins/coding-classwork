<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Add a Star Wars Character!</title>
	<!-- Latest compiled and minified CSS & JS -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
	<script src="https://code.jquery.com/jquery.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
</head>
<body>
	<div class="panel panel-default">
		<div class="panel-heading">
			<h1>Add a Character!</h1>
		</div>
		<div class="panel-body">
			<form action="" method="POST" role="form" class="form-horizzontal">
				<legend>New Character Properties</legend>
			
				<div class="form-group">
					<label for="">Name</label>
					<input type="text" class="form-control" id="charName" placeholder="Name">
				</div>
				<div class="form-group">
					<label for="">Age</label>
					<input type="text" class="form-control" id="charAge" placeholder="Age">
				</div>
				<div class="form-group">
					<label for="">Role</label>
					<input type="text" class="form-control" id="charRole" placeholder="Role">
				</div>
				<div class="form-group">
					<label for="">Force Points</label>
					<input type="text" class="form-control" id="charForce" placeholder="Force Points">
				</div>
			
				<button type="submit" id="submitter" class="btn btn-primary"><i class="glyphicon glyphicon-plus"></i> Add</button>
			</form>
		</div>
	</div>
</body>
<script type="text/javascript">
	function getFromApi(name){
		var url = 'http://localhost:3000/';
		$.ajax({url: url, method: 'GET'})
		.done(function(response) {
			console.log('inside!!!');
			$('#charName').html(response.name);
			$('#charAge').html(response.role);
			$('#charRole').html(response.age);
			$('#charForce').html(response.forcePoints);
			//console.log(response);
		});
	};

	$('#submitter').click(function(){
		
		var nameInput = $( '#charName' ).val().trim();
		var ageInput = $( '#charAge' ).val().trim();
		var roleInput = $( '#charRole' ).val().trim();
		var forceInput = $( '#charForce' ).val().trim();

		$('#charName').html('');
		$('#charAge').html('');
		$('#charRole').html('');
		$('#charForce').html('');

		console.log(nameInput);
		getFromApi(nameInput);

		var newChar = {
			name: 	nameInput,
			age: 	ageInput,
			role: 	roleInput,
			forcePoints: forceInput
		}

		characters.push(newChar);

		$('#charName').val('');
		$('#charAge').val('');
		$('#charRole').val('');
		$('#charForce').val('');
		return false;
	});
</script>
</html>